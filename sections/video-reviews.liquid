{% comment %}
  Section: Reviews with Image/Video (Swiper)
  Allows admin to add review blocks with either an image OR a video.
{% endcomment %}

<div class="reviews-section">
  <div class="swiper reviews-swiper">
    <div class="swiper-wrapper">
      {% for block in section.blocks %}
        <div class="swiper-slide review-slide">
          {% if block.settings.review_image != blank %}
            <img src="{{ block.settings.review_image | image_url: width: 600 }}" alt="Review Image" loading="lazy">
          {% elsif block.settings.review_video != blank %}
            <video controls playsinline>
              <source src="{{ block.settings.review_video | file_url }}" type="video/mp4">
              Your browser does not support the video tag.
            </video>
          {% endif %}
        </div>
      {% endfor %}
    </div>

    <!-- Swiper Navigation -->
    <div class="swiper-button-prev"></div>
    <div class="swiper-button-next"></div>
    <div class="swiper-pagination"></div>
  </div>
</div>

{% schema %}
{
  "name": "Reviews Slider",
  "settings": [],
  "blocks": [
    {
      "type": "review",
      "name": "Review",
      "settings": [
        {
          "type": "image_picker",
          "id": "review_image",
          "label": "Review Image"
        },
        {
          "type": "video",
          "id": "review_video",
          "label": "Review Video"
        }
      ]
    }
  ],
  "max_blocks": 12,
  "presets": [
    {
      "name": "Reviews Slider",
      "category": "Custom"
    }
  ]
}
{% endschema %}

{% javascript %}
document.addEventListener("DOMContentLoaded", function () {
  new Swiper(".reviews-swiper", {
    loop: true,
    spaceBetween: 20,
    slidesPerView: 1,
    pagination: {
      el: ".swiper-pagination",
      clickable: true,
    },
    navigation: {
      nextEl: ".swiper-button-next",
      prevEl: ".swiper-button-prev",
    },
    breakpoints: {
      768: { slidesPerView: 2 },
      1024: { slidesPerView: 3 }
    }
  });
});
{% endjavascript %}

{% stylesheet %}
.reviews-section {
  padding: 40px 0;
}
.review-slide img,
.review-slide video {
  width: 100%;
  height: auto;
  border-radius: 12px;
  object-fit: cover;
}
{% endstylesheet %}

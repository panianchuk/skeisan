<button id="backToTop"
  class="back-to-top"
  aria-label="Back to top"
  title="Back to top"
  type="button">
  <!-- Simple up arrow icon -->
  <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
    <path d="M12 4l-7 7h4v9h6v-9h4z"></path>
  </svg>
</button>

<style>
.back-to-top {
  position: fixed;
  right: 2.25rem;     
  bottom: 2.25rem;    
  width: 48px;
  height: 48px;
  display: grid;
  place-items: center;
  border: none;
  border-radius: 999px;
  background: #111;          /* adjust to fit your theme */
  color: #fff;
  box-shadow: 0 6px 18px rgba(0,0,0,.2);
  cursor: pointer;
  opacity: 0;
  transform: translateY(12px);
  pointer-events: none;
  transition: opacity .2s ease, transform .2s ease, box-shadow .2s ease;
  z-index: 9999;
}

.back-to-top svg { fill: currentColor; }

.back-to-top:hover { box-shadow: 0 10px 24px rgba(0,0,0,.25); }

.back-to-top:focus-visible {
  outline: 2px solid #4c9ffe;  /* accessible focus ring */
  outline-offset: 3px;
}

.back-to-top--visible {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

/* Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  .back-to-top {
    transition: none;
  }
}

</style>

<script>
  (function () {
    var btn = document.getElementById('backToTop');
    if (!btn) return;

    var lastKnownScrollY = 0;
    var ticking = false;
    var showAt = 800; // px scrolled before showing

    function onScroll() {
      lastKnownScrollY = window.scrollY || window.pageYOffset;
      if (!ticking) {
        window.requestAnimationFrame(function () {
          btn.classList.toggle('back-to-top--visible', lastKnownScrollY > showAt);
          ticking = false;
        });
        ticking = true;
      }
    }

    function scrollToTop(e) {
      e.preventDefault();
      var reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (reduceMotion) {
        window.scrollTo(0, 0);
      } else {
        try {
          window.scrollTo({ top: 0, behavior: 'smooth' });
        } catch (_) {
          // Fallback
          var c = document.documentElement.scrollTop || document.body.scrollTop;
          (function smoothStep() {
            if (c > 0) {
              window.scrollTo(0, c -= Math.max(1, Math.floor(c / 8)));
              requestAnimationFrame(smoothStep);
            }
          })();
        }
      }
    }

    window.addEventListener('scroll', onScroll, { passive: true });
    btn.addEventListener('click', scrollToTop);
  })();
</script>
